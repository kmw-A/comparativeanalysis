<!DOCTYPE html>
<html>
<head>
  <title>Music Preferences</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f2f2f2;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    .popup {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.5);
    }

    .popup-content {
      background-color: #fefefe;
      margin: 15% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 600px;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    }

    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }

    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }

    h1 {
      text-align: center;
      color: #333;
    }

    .category {
      margin-bottom: 20px;
    }

    h2 {
      color: #333;
    }

    ul {
      list-style-type: none;
      padding: 0;
    }

    li {
      margin-bottom: 10px;
    }

    audio {
      width: 100%;
      margin-top: 5px;
    }

    button {
      padding: 5px 10px;
      background-color: #4CAF50;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 5px;
    }

    button:hover {
      background-color: #45a049;
    }

    .open-popup {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      font-size: 18px;
      background-color: #4CAF50;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .open-popup:hover {
      background-color: #45a049;
    }

    .filter {
      margin-bottom: 10px;
    }

    .filter label {
      margin-right: 10px;
    }

    .confirmation {
      display: none;
      margin-top: 10px;
      padding: 10px;
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div class="container">
    <button class="open-popup" onclick="openPopup()">Select Music Preferences</button>

    <div id="musicPopup" class="popup">
      <div class="popup-content">
        <span class="close" onclick="closePopup()">&times;</span>
        <h1>Music Preferences</h1>

        <div class="filter">
          <label><input type="checkbox" id="positive-checkbox" onchange="filterMusic()"> Positive</label>
          <label><input type="checkbox" id="neutral-checkbox" onchange="filterMusic()"> Neutral</label>
          <label><input type="checkbox" id="negative-checkbox" onchange="filterMusic()"> Negative</label>
        </div>

        <div class="category">
          <h2>All Music</h2>
          <ul id="all-music-list"></ul>
        </div>
      </div>
    </div>

    <div id="confirmation" class="confirmation"></div>
  </div>

  <script>
    // Function to open the popup
    function openPopup() {
      document.getElementById("musicPopup").style.display = "block";
    }

    // Function to close the popup
    function closePopup() {
      document.getElementById("musicPopup").style.display = "none";
    }

    // Function to load music files from the "music" folder
    function loadAllMusicFiles() {
      const allMusicList = document.getElementById('all-music-list');
      allMusicList.innerHTML = '';

      const musicFolder = 'music';
      const files = [
        'negative/negative_track1.mp3',
        'negative/negative_track2.mp3',
        'neutral/neutral_track1.mp3',
        'neutral/neutral_track2.mp3',
        'positive/positive_track1.mp3',
        'positive/positive_track2.mp3'
      ];

      files.forEach(file => {
        const listItem = document.createElement('li');
        const audio = document.createElement('audio');
        audio.src = `${musicFolder}/${file}`;
        audio.controls = true;

        const addToPositive = document.createElement('button');
        addToPositive.textContent = 'Add to Positive';
        addToPositive.onclick = function() {
          addMusic('Positive', file);
        };

        const addToNeutral = document.createElement('button');
        addToNeutral.textContent = 'Add to Neutral';
        addToNeutral.onclick = function() {
          addMusic('Neutral', file);
        };

        const addToNegative = document.createElement('button');
        addToNegative.textContent = 'Add to Negative';
        addToNegative.onclick = function() {
          addMusic('Negative', file);
        };

        listItem.appendChild(audio);
        listItem.appendChild(addToPositive);
        listItem.appendChild(addToNeutral);
        listItem.appendChild(addToNegative);
        allMusicList.appendChild(listItem);
      });
    }

    // Function to add music to a specific category
    function addMusic(category, file) {
      // Display confirmation message
      const confirmation = document.getElementById('confirmation');
      confirmation.textContent = `Music file "${file}" added to ${category} category.`;
      confirmation.style.display = 'block';

      // Hide confirmation message after 3 seconds
      setTimeout(() => {
        confirmation.style.display = 'none';
      }, 3000);
    }

    // Function to filter the displayed music files based on the selected categories
    function filterMusic() {
      const positiveCheckbox = document.getElementById('positive-checkbox');
      const neutralCheckbox = document.getElementById('neutral-checkbox');
      const negativeCheckbox = document.getElementById('negative-checkbox');
      const allMusicList = document.getElementById('all-music-list');
      const listItems = allMusicList.getElementsByTagName('li');

      for (let i = 0; i < listItems.length; i++) {
        const audio = listItems[i].getElementsByTagName('audio')[0];
        const category = audio.src.split('/')[1];

        if (
          (positiveCheckbox.checked && category === 'positive') ||
          (neutralCheckbox.checked && category === 'neutral') ||
          (negativeCheckbox.checked && category === 'negative') ||
          (!positiveCheckbox.checked && !neutralCheckbox.checked && !negativeCheckbox.checked)
        ) {
          listItems[i].style.display = 'block';
        } else {
          listItems[i].style.display = 'none';
        }
      }
    }

    // Load all music files on page load
    loadAllMusicFiles();
  </script>
</body>
</html>